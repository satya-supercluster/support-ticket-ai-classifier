# version: '3.8'
# 
# services:
#   ticket-classifier:
#     build: .
#     container_name: ticket-classifier
#     ports:
#       - "8000:8000"
#     environment:
#       - AZURE_OPENAI_ENDPOINT=${AZURE_OPENAI_ENDPOINT}
#       - AZURE_OPENAI_API_KEY=${AZURE_OPENAI_API_KEY}
#       - AZURE_OPENAI_DEPLOYMENT=${AZURE_OPENAI_DEPLOYMENT}
#       - COSMOS_ENDPOINT=${COSMOS_ENDPOINT}
#       - COSMOS_KEY=${COSMOS_KEY}
#       - APPLICATIONINSIGHTS_CONNECTION_STRING=${APPLICATIONINSIGHTS_CONNECTION_STRING}
#       - LOG_LEVEL=INFO
#     volumes:
#       - ./logs:/app/logs
#     restart: unless-stopped
#     healthcheck:
#       test: ["CMD", "curl", "-f", "http://localhost:8000/health"]
#       interval: 30s
#       timeout: 10s
#       retries: 3
#       start_period: 40s
# 
#   prometheus:
#     image: prom/prometheus:latest
#     container_name: prometheus
#     ports:
#       - "9090:9090"
#     volumes:
#       - ./monitoring/prometheus.yml:/etc/prometheus/prometheus.yml
#       - prometheus_data:/prometheus
#     command:
#       - '--config.file=/etc/prometheus/prometheus.yml'
#       - '--storage.tsdb.path=/prometheus'
#     restart: unless-stopped
# 
#   grafana:
#     image: grafana/grafana:latest
#     container_name: grafana
#     ports:
#       - "3000:3000"
#     environment:
#       - GF_SECURITY_ADMIN_PASSWORD=admin
#     volumes:
#       - grafana_data:/var/lib/grafana
#       - ./monitoring/grafana-dashboards:/etc/grafana/provisioning/dashboards
#     restart: unless-stopped
#     depends_on:
#       - prometheus
# 
# volumes:
#   prometheus_data:
#   grafana_data: